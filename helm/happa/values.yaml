name: happa
namespace: giantswarm

image:
  repository: giantswarm/happa

userID: 101
groupID: 101

port: 8000
protocol: TCP

api:
  address: ""

aws:
  availabilityZones: []
  instance:
    capabilities: {}
    allowed: []
    default: ""

azure:
  availabilityZones: []
  vm:
    vmSize:
      capabilities: {}
      allowed: []
      default: ""

capa:
  availabilityZones: []
  instance:
    capabilities: {}
    allowed: []
    default: ""

capz:
  availabilityZones: []
  vm:
    vmSize:
      capabilities: {}
      allowed: []
      default: ""

gcp:
  availabilityZones: []
  machinetypes:
    capabilities: {}
    allowed: []
    default: ""

ingress:
  happa:
    enabled: true
  happaapi:
    enabled: true
  externalDNS: false
  tls:
    clusterIssuer: "letsencrypt-giantswarm"

guestCluster:
  base: ""

kubernetes:
  versions: {}

happa:
  address: ""
  host: check
  featureFlags:
    mapiAuth: false
    mapiClusters: false
  defaultRequestTimeoutSeconds: 10

happaapi:
  address: ""
  host: check
  allowedOrigins: []

athena:
  address: ""

managementCluster:
  name: ""
  customer: ""
  pipeline: ""
  provider:
    kind: ""
    flavor: ""
    region: ""

oidc:
  issuerAddress: ""
  giantswarm:
    writeAllGroups: []

registry:
  domain: gsoci.azurecr.io

security:
  restrictAccess:
    api: false
  subnet:
    vpn: ""
    customer:
      public: ""
      private: ""

containerSecurityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  runAsNonRoot: true

# Gateway API HTTPRoute for happa frontend
route:
  # -- Enable Gateway API HTTPRoute for happa
  enabled: false
  # -- Set the route kind
  # Valid options are GRPCRoute, HTTPRoute, TCPRoute, TLSRoute, UDPRoute
  kind: HTTPRoute
  # -- Override the route name (defaults to .Values.name)
  name: ""
  # -- Annotations to add to the route
  annotations: {}
  # -- Labels to add to the route
  labels: {}
  # -- Hostnames for the route (supports templating)
  # Example: ["{{ .Values.happa.host }}"]
  hostnames: []
  # -- Parent gateway references
  parentRefs: []
  # - name: giantswarm-default
  #   namespace: envoy-gateway-system
  # -- Route matching rules
  matches:
    - path:
        type: PathPrefix
        value: /
  # -- Filters define the filters that are applied to requests that match this rule
  filters: []
  # -- Additional custom rules that can be added to the route
  additionalRules: []
  # -- SecurityPolicy configuration (Envoy Gateway)
  securityPolicy:
    enabled: false
    annotations: {}
    labels: {}
    # basicAuth:
    #   users:
    #     name: <secret_name>
    # cors:
    #   allowOrigins:
    #     - "*"
    #   allowMethods:
    #     - GET
    #     - POST
    # jwt:
    #   providers:
    #     - name: example
    #       issuer: https://example.com
    # oidc:
    #   provider:
    #     issuer: https://example.com
    # extAuth:
    #   http:
    #     service:
    #       name: auth-service
    #       port: 80
    # authorization:
    #   defaultAction: Deny
    #   rules: []

# Gateway API HTTPRoute for happaapi (kubernetes API proxy)
happaapiRoute:
  # -- Enable Gateway API HTTPRoute for happaapi
  enabled: false
  # -- Set the route kind
  # Valid options are GRPCRoute, HTTPRoute, TCPRoute, TLSRoute, UDPRoute
  kind: HTTPRoute
  # -- Override the route name (defaults to "happaapi")
  name: ""
  # -- Namespace for the route (defaults to "default" for kubernetes service)
  namespace: default
  # -- Annotations to add to the route
  annotations: {}
  # -- Labels to add to the route
  labels: {}
  # -- Hostnames for the route (supports templating)
  # Example: ["{{ .Values.happaapi.host }}"]
  hostnames: []
  # -- Parent gateway references
  parentRefs: []
  # - name: giantswarm-default
  #   namespace: envoy-gateway-system
  # -- Backend service configuration
  backend:
    name: kubernetes
    port: 443
    # -- Port name in the Service (optional, defaults to "https" for port 443)
    portName: ""
  # -- BackendTLSPolicy configuration for TLS between Gateway and backend
  # Required when proxying to Kubernetes API server or other TLS backends
  backendTLS:
    enabled: false
    annotations: {}
    labels: {}
    # -- TLS validation configuration
    validation:
      # -- CA certificate references (ConfigMap or ClusterTrustBundle)
      # For Kubernetes API server, use ClusterTrustBundle with cluster CA
      # Example with ConfigMap:
      # caCertificateRefs:
      #   - name: kube-root-ca
      #     group: ""
      #     kind: ConfigMap
      # Example with ClusterTrustBundle:
      # caCertificateRefs:
      #   - name: kube-root-ca
      #     group: ""
      #     kind: ClusterTrustBundle
      caCertificateRefs:
      - name: kube-root-ca.crt
        group: ""
        kind: ConfigMap
      # -- Hostname to validate against the backend certificate
      # For Kubernetes API server, this is typically the API server hostname
      # Defaults to "kubernetes.default.svc.cluster.local" for the kubernetes service
      hostname: "kubernetes.default.svc.cluster.local"
      # -- Use well-known CA certificates (system trust store)
      # Set to true to use system CA certificates instead of caCertificateRefs
      wellKnownCACerts: false
  # -- Route matching rules
  matches:
    - path:
        type: PathPrefix
        value: /
  # -- Filters define the filters that are applied to requests that match this rule
  filters: []
  # -- Additional custom rules that can be added to the route
  additionalRules: []
  # -- SecurityPolicy configuration (Envoy Gateway)
  securityPolicy:
    enabled: false
    annotations: {}
    labels: {}
    # cors:
    #   allowOrigins:
    #     - "{{ .Values.happa.address }}"
    #   allowMethods:
    #     - GET
    #     - POST
    #     - PUT
    #     - DELETE
    #   allowHeaders:
    #     - DNT
    #     - X-CustomHeader
    #     - Keep-Alive
    #     - User-Agent
    #     - X-Requested-With
    #     - If-Modified-Since
    #     - Cache-Control
    #     - Content-Type
    #     - Authorization
    #     - Impersonate-User
    #     - Impersonate-Group
