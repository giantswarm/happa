FROM node:9-slim

RUN apt-get update && apt-get install -y build-essential python

RUN apt-get install -y git-core

# Create app directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

RUN npm set progress=false
RUN npm config set registry https://registry.npmjs.org/

# Install some slow dependencies individually, so they can get cached as layers
RUN npm install node-sass@4.7.2

# Install app dependencies
COPY package.json /usr/src/app/

RUN npm install
RUN npm install -g grunt

# check for dependency updates
RUN npm install -g npm-check-updates
RUN ncu

# Bundle app source
COPY . /usr/src/app

EXPOSE 8000
