FROM node:10-slim

RUN apt-get update && apt-get install -y build-essential python

RUN apt-get install -y git-core

# Create app directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

RUN npm set progress=false
RUN npm config set registry https://registry.npmjs.org/

# Install some slow dependencies individually, so they can get cached as layers
RUN yarn add node-sass@4.9.4

# Install app dependencies
COPY package.json /usr/src/app/

RUN yarn install
RUN yarn add grunt

# check for dependency updates
RUN yarn add npm-check-updates
RUN ncu

# Bundle app source
COPY . /usr/src/app

EXPOSE 8000
